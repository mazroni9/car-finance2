# نظام تمويل السيارات المتكامل

نظام متكامل لإدارة تمويل السيارات ومراقبة التسويات المالية في المنصة.

## 🚀 الميزات الرئيسية

### 📊 نظام التسويات المالية
- **مراقبة شاملة**: عرض جميع التسويات مع تفاصيلها
- **فلاتر متقدمة**: حسب النوع، الحالة، التاريخ، المبلغ
- **إدارة مباشرة**: إكمال أو إلغاء التسويات المعلقة
- **إحصائيات فورية**: ملخص شامل للأرقام المهمة



### 🚗 نظام السيارات
- **عرض السيارات**: معرض شامل للسيارات المتاحة
- **تفاصيل كاملة**: صور، مواصفات، تقارير فنية
- **شراء مباشر**: إتمام عملية الشراء مع التسويات التلقائية
- **ربط مع المعارض**: ربط السيارات بمعارض محددة

### 🏢 لوحات التحكم
- **لوحة الإدارة**: مراقبة شاملة للنظام
- **لوحة التاجر**: إدارة العمليات التجارية
- **لوحة المعرض**: إدارة مخزون السيارات

## 🛠️ التقنيات المستخدمة

- **Frontend**: Next.js 14, React, TypeScript
- **Styling**: Tailwind CSS
- **Database**: Supabase (PostgreSQL)
- **Authentication**: Supabase Auth
- **File Storage**: Cloudinary
- **Deployment**: Vercel

## 📁 هيكل المشروع

```
car-finance/
├── src/
│   ├── app/
│   │   ├── api/
│   │   │   ├── settlements/          # API التسويات
│   │   │   └── cars/                 # API السيارات
│   │   ├── dashboard/
│   │   │   └── settlements/          # صفحة التسويات
│   │   └── cars/                     # صفحات السيارات
│   ├── components/
│   │   └── settlements/              # مكونات التسويات
│   └── types/
│       └── settlement.ts             # أنواع التسويات
├── sql/
│   ├── settlements_schema.sql        # جدول التسويات
│   └── combined_schema.sql           # المخطط المجمع
└── scripts/
    └── setup-database.js             # إعداد قاعدة البيانات
```

## 🚀 التثبيت والتشغيل

### 1. تثبيت المتطلبات
```bash
npm install
# أو
pnpm install
```

### 2. إعداد المتغيرات البيئية
أنشئ ملف `.env.local`:
```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
```

### 3. إعداد قاعدة البيانات
```bash
# تشغيل script إعداد قاعدة البيانات
node scripts/setup-database.js

# ثم تشغيل المخطط في Supabase SQL Editor
# أو استخدام Supabase CLI
supabase db reset
```

### 4. تشغيل المشروع
```bash
npm run dev
# أو
pnpm dev
```

## 📊 نظام التسويات

### أنواع التسويات
- **car_sale**: بيع سيارة
- **commission**: عمولة
- **transfer_fee**: رسوم نقل
- **refund**: استرداد
- **platform_fee**: رسوم المنصة
- **showroom_fee**: رسوم المعرض

### حالات التسويات
- **pending**: قيد الانتظار
- **completed**: مكتمل
- **failed**: فشل
- **cancelled**: ملغي



## 🔄 رحلة المستخدم

### 1. تصفح السيارات
- زيارة صفحة السيارات
- اختيار سيارة مناسبة
- عرض التفاصيل الكاملة

### 2. إتمام الشراء
- الضغط على "إتمام الشراء"
- عرض ملخص التكاليف
- تأكيد العملية

### 3. إنشاء التسويات
- تسوية بيع السيارة
- تسوية رسوم المنصة
- تسوية رسوم المعرض

### 4. مراقبة التسويات
- عرض جميع التسويات
- إكمال أو إلغاء التسويات المعلقة
- مراقبة الإحصائيات

## 📈 الإحصائيات

- **إجمالي التسويات**: عدد جميع التسويات
- **التسويات المكتملة**: المبالغ المكتملة
- **تسويات اليوم**: إحصائيات اليوم
- **تسويات الشهر**: إحصائيات الشهر

## 🔧 API Endpoints

### التسويات
- `GET /api/settlements` - جلب جميع التسويات
- `POST /api/settlements` - إنشاء تسوية جديدة
- `GET /api/settlements/summary` - ملخص التسويات
- `PATCH /api/settlements/[id]` - إدارة إجراءات التسوية

### المحافظ
- `GET /api/wallets` - جلب جميع المحافظ
- `POST /api/wallets` - إنشاء محفظة جديدة

### السيارات
- `GET /api/cars` - جلب جميع السيارات
- `GET /api/cars?id=...` - جلب سيارة محددة
- `POST /api/cars` - إضافة سيارة جديدة

## 🎯 الميزات المستقبلية

- [ ] نظام المدفوعات الإلكترونية
- [ ] إشعارات فورية للتسويات
- [ ] تقارير مالية متقدمة
- [ ] نظام النقاط والمكافآت
- [ ] تطبيق جوال

## 🤝 المساهمة

1. Fork المشروع
2. إنشاء branch جديد (`git checkout -b feature/AmazingFeature`)
3. Commit التغييرات (`git commit -m 'Add some AmazingFeature'`)
4. Push إلى Branch (`git push origin feature/AmazingFeature`)
5. فتح Pull Request

## 📄 الرخصة

هذا المشروع مرخص تحت رخصة MIT - انظر ملف [LICENSE](LICENSE) للتفاصيل.

## 📞 الدعم

للدعم والاستفسارات:
- 📧 البريد الإلكتروني: support@carfinance.com
- 💬 الدردشة: [Discord](https://discord.gg/carfinance)
- 📱 الواتساب: +966501234567

---

**تم تطوير هذا النظام بواسطة فريق تطوير متخصص في مجال تمويل السيارات** 🚗💻
